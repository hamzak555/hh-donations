import { Accordion, Container, Title, Text, Box, Group, Button } from '@mantine/core';
import { IconMail, IconQuestionMark } from '@tabler/icons-react';
import { Link } from 'react-router-dom';
import { useState } from 'react';

const faqs = [
  {
    question: "What types of clothing do you accept?",
    answer: "We accept gently used clothing for all ages including shirts, pants, dresses, shoes, jackets, and accessories. Items should be clean and in good condition. We cannot accept items that are torn, stained, or heavily worn."
  },
  {
    question: "Where do the donated clothes go?",
    answer: "Donated clothing is sorted and distributed directly to families in need across Canada and to under-resourced regions worldwide. We partner with local organizations and maintain full transparency in our distribution process."
  },
  {
    question: "How do I find the nearest donation bin?",
    answer: "Use our interactive map on the 'Find a Bin' page to locate the nearest donation point. Simply enter your address or postal code, and we'll show you all nearby locations with directions and operating hours."
  },
  {
    question: "Are donations tax-deductible?",
    answer: "Yes! H&H Donations is a registered not-for-profit organization. We can provide tax receipts for donations upon request. Contact us with details of your donation for receipt processing."
  },
  {
    question: "Can I volunteer with H&H Donations?",
    answer: "Absolutely! We welcome volunteers to help with sorting, organizing donation drives, and distribution events. Contact us to learn about current volunteer opportunities in your area."
  },
  {
    question: "How can I track the impact of my donation?",
    answer: "We provide regular updates on our social media and website about our global impact. Each donation contributes to our transparent reporting system that shows how many families we've helped."
  },
  {
    question: "Do you accept donations from businesses?",
    answer: "Yes, we work with businesses, schools, and organizations for larger donation drives. We can arrange special pickup services for bulk donations and provide promotional materials for your donation drive."
  },
  {
    question: "What should I do if a donation bin is full?",
    answer: "If a bin is full, please try another nearby location using our map. You can also contact us to report full bins so we can arrange for pickup. Never leave items outside the bins as they may be damaged by weather."
  }
];

const CustomChevron = ({ isOpen }) => {
  return (
    <div style={{ 
      width: '20px', 
      height: '20px', 
      display: 'flex', 
      alignItems: 'center', 
      justifyContent: 'center',
      position: 'relative'
    }}>
      <div
        style={{
          width: '16px',
          height: '16px',
          position: 'relative'
        }}
      >
        {/* Horizontal line (always visible, rotates to stay horizontal) */}
        <div
          style={{
            position: 'absolute',
            top: '50%',
            left: '50%',
            width: '12px',
            height: '2px',
            backgroundColor: '#898989',
            transform: 'translate(-50%, -50%)',
            borderRadius: '1px'
          }}
        />
        {/* Vertical line (spins and fades out when open) */}
        <div
          style={{
            position: 'absolute',
            top: '50%',
            left: '50%',
            width: '2px',
            height: '12px',
            backgroundColor: '#898989',
            transform: `translate(-50%, -50%) rotate(${isOpen ? '90deg' : '0deg'})`,
            borderRadius: '1px',
            opacity: isOpen ? 0 : 1,
            transition: 'all 0.3s ease'
          }}
        />
      </div>
    </div>
  );
};

export function FaqSimple() {
  const [openItems, setOpenItems] = useState([]);

  return (
    <Box style={{ backgroundColor: '#f4f4f4', minHeight: '100vh', fontFamily: '"Cal Sans", -apple-system, BlinkMacSystemFont, sans-serif' }}>
      <Container size={1200} style={{ paddingTop: '4rem', paddingBottom: '4rem', maxWidth: '1200px' }}>
        {/* Header Section */}
        <div style={{ textAlign: 'center', marginBottom: '3rem' }}>
          <Title
            style={{
              fontSize: 'clamp(40px, 5vw, 64px)',
              fontWeight: 600,
              lineHeight: 1.1,
              color: '#242424',
              marginBottom: '1rem',
              letterSpacing: '-0.025em',
              fontFamily: '"Cal Sans", -apple-system, BlinkMacSystemFont, sans-serif'
            }}
          >
            Frequently asked questions
          </Title>
          <Text
            style={{
              fontSize: '18px',
              color: '#898989',
              maxWidth: '600px',
              margin: '0 auto',
              lineHeight: 1.5,
              fontFamily: '"Matter Regular", -apple-system, BlinkMacSystemFont, sans-serif',
              fontWeight: 400
            }}
          >
            Everything you need to know about donating clothing and our mission to help families worldwide.
          </Text>
        </div>

        {/* FAQ Accordion */}
        <Accordion
          multiple={true}
          value={openItems}
          onChange={setOpenItems}
          styles={{
            root: {
              backgroundColor: 'transparent',
              maxWidth: '810px',
              margin: '0 auto'
            },
            item: {
              backgroundColor: '#ffffff',
              border: 'none',
              borderRadius: '12px',
              marginBottom: '12px',
              overflow: 'hidden',
              boxShadow: '0 1px 3px rgba(0,0,0,0.1)',
              '&:last-child': {
                marginBottom: 0
              }
            },
            control: {
              backgroundColor: '#ffffff',
              border: 'none',
              fontSize: '18px',
              fontWeight: 600,
              color: '#242424',
              padding: '24px',
              fontFamily: '"Cal Sans", -apple-system, BlinkMacSystemFont, sans-serif',
              '&:hover': {
                backgroundColor: '#ffffff'
              }
            },
            panel: {
              backgroundColor: '#ffffff',
              padding: '0 24px 24px 24px'
            },
            content: {
              fontSize: '18px',
              color: '#898989',
              lineHeight: 1.5,
              fontFamily: '"Matter Regular", -apple-system, BlinkMacSystemFont, sans-serif',
              fontWeight: 400
            },
            chevron: {
              border: 'none',
              backgroundColor: 'transparent',
              borderRadius: '50%',
              width: '24px',
              height: '24px',
              color: '#898989',
              transition: 'all 0.2s ease',
              '&[data-rotate]': {
                transform: 'none',
              }
            }
          }}
        >
          {faqs.map((faq, index) => {
            const itemKey = `faq-${index}`;
            const isOpen = openItems.includes(itemKey);
            
            return (
              <Accordion.Item 
                key={index} 
                value={itemKey}
                style={{
                  backgroundColor: isOpen ? 'var(--hh-lightest)' : '#ffffff',
                  transition: 'background-color 0.3s ease'
                }}
              >
                <Accordion.Control 
                  chevron={<CustomChevron isOpen={isOpen} />}
                  style={{
                    backgroundColor: isOpen ? 'var(--hh-lightest)' : '#ffffff',
                  }}
                >
                  {faq.question}
                </Accordion.Control>
                <Accordion.Panel
                  style={{
                    backgroundColor: isOpen ? 'var(--hh-lightest)' : '#ffffff',
                  }}
                >
                  <Text>{faq.answer}</Text>
                </Accordion.Panel>
              </Accordion.Item>
            );
          })}
        </Accordion>

        {/* Contact CTA */}
        <Box style={{ 
          textAlign: 'center', 
          marginTop: '48px',
          padding: '48px 32px',
          backgroundColor: '#ffffff',
          borderRadius: '12px',
          maxWidth: '810px',
          margin: '48px auto 0 auto',
          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'
        }}>
          <div style={{
            width: '64px',
            height: '64px',
            backgroundColor: 'var(--hh-lightest)',
            borderRadius: '50%',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            margin: '0 auto 24px auto'
          }}>
            <IconQuestionMark size={32} color="var(--hh-primary-darkest)" />
          </div>
          
          <Title
            order={2}
            style={{
              fontSize: '48px',
              fontWeight: 600,
              color: '#242424',
              marginBottom: '12px',
              lineHeight: 1.1,
              fontFamily: '"Cal Sans", -apple-system, BlinkMacSystemFont, sans-serif'
            }}
          >
            Still have questions?
          </Title>
          
          <Text
            style={{
              fontSize: '18px',
              color: '#898989',
              marginBottom: '32px',
              maxWidth: '600px',
              margin: '0 auto 32px auto',
              lineHeight: 1.5,
              fontFamily: '"Matter Regular", -apple-system, BlinkMacSystemFont, sans-serif',
              fontWeight: 400
            }}
          >
            Can't find what you're looking for? Our team is here to help with any questions about donating or our mission.
          </Text>
          
          <Group justify="center" spacing="16px">
            <Button
              size="lg"
              leftIcon={<IconMail size="1rem" />}
              style={{
                backgroundColor: 'var(--hh-primary-darkest)',
                color: '#ffffff',
                fontSize: '18px',
                fontWeight: 400,
                padding: '12px 24px',
                border: 'none',
                borderRadius: '12px',
                fontFamily: '"Matter Regular", -apple-system, BlinkMacSystemFont, sans-serif'
              }}
            >
              Contact Support
            </Button>
            <Button
              component={Link}
              to="/about"
              variant="outline"
              size="lg"
              style={{
                borderColor: 'transparent',
                color: '#242424',
                fontSize: '18px',
                fontWeight: 400,
                padding: '12px 24px',
                borderRadius: '12px',
                backgroundColor: 'transparent',
                fontFamily: '"Matter Regular", -apple-system, BlinkMacSystemFont, sans-serif'
              }}
            >
              Learn More
            </Button>
          </Group>
        </Box>
      </Container>
    </Box>
  );
}